<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">

<!-- Mirrored from localhost/dotclear/index.php?post/NDfield-format by HTTrack Website Copier/3.x [XR&CO'2010], Sun, 27 Jan 2013 10:35:21 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8"><!-- /Added by HTTrack -->
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  <meta name="ROBOTS" content="INDEX, FOLLOW" />
  
  <title>NDfield format - DisPerSE - persistent structures identification</title>
  <meta name="description" lang="en" content="This is the native binary format of DisPerSE. Functions for reading and writing NDfield format in C can be found within the file ${DISPERSE_SRC}/src/C/NDfield.c (see functions" />
  <meta name="copyright" content="sousbie" />
  <meta name="author" content="thierry sousbie" />
  <meta name="date" scheme="W3CDTF" content="2430-01-02T06:56:00+01:00" />
  
  <link rel="schema.dc" href="http://purl.org/dc/elements/1.1/" />
  <meta name="dc.title" content="NDfield format" />
  <meta name="dc.description" lang="en" content="This is the native binary format of DisPerSE. Functions for reading and writing NDfield format in C can be found within the file ${DISPERSE_SRC}/src/C/NDfield.c (see functions" />
  <meta name="dc.creator" content="thierry sousbie" />
  <meta name="dc.language" content="en" />
  <meta name="dc.publisher" content="thierry sousbie" />
  <meta name="dc.rights" content="sousbie" />
  <meta name="dc.date" scheme="W3CDTF" content="2430-01-02T06:56:00+01:00" />
  <meta name="dc.type" content="text" />
  <meta name="dc.format" content="text/html" />
  
  <link rel="top" href="indexd41d.html?" title="Home" />
  <link rel="contents" href="index888d.html?archive" title="Archives" />
  
  <link rel="next" href="indexa0c1.html?post/field-formats"
  title="Field files" />
  
  <link rel="prev" href="indexd473.html?post/NDfield_ascii-format"
  title="NDfield_ascii format" />
  
  <link rel="alternate" type="application/atom+xml" title="Atom 1.0" href="../images/index4ca3.php?feed/atom" />
  
  <link rel="shortcut icon" href="../images/favicon.ico" />

<style type="text/css" media="screen">
@import url(../images/style.css);
</style>
<style type="text/css" media="print">
@import url(../images/print.css);
</style>

<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-37686840-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
  
  <script type="text/javascript" src="../images/post.js"></script>
  <script type="text/javascript">
  //<![CDATA[
  var post_remember_str = 'Remember me on this blog';
  //]]>
  </script>

</head>

<body class="dc-post">
<div id="page">


<div id="top">
<!--
<h1><span><a href="http://localhost/dotclear/index.php?">DisPerSE - persistent structures identification</a></span></h1>
 -->

  </div>

<p id="prelude">
<a href="indexd41d.html?">Home</a> |
<a href="index888d.html?archive">Show all</a>
</p>

<!--
<ul id="nav-box">
2.
<li><a href="http://localhost/dotclear/index.php?">Accueil</a></li>
3.
<li><a href="http://localhost/dotclear/index.php?archive" title="Liste des mois de publication">Archives</a></li>
4.
<li><a href="http://localhost/dotclear/index.php?contact" title="Formulaire de contact">Me contacter</a></li>
5.
</ul>
 -->

<div id="wrapper">

<div id="main">
  <div id="content">
  
  <p id="navlinks">
 
  <a href="indexa0c1.html?post/field-formats"
  title="Field files" class="prev">&#171; Field files</a>
   <span>-</span> <a href="indexd473.html?post/NDfield_ascii-format"
  title="NDfield_ascii format" class="next">NDfield_ascii format &#187;</a>

<!--
  <a href="http://localhost/dotclear/index.php?post/NDfield_ascii-format"
  title="NDfield_ascii format" class="prev">&#171; NDfield_ascii format</a>
  <span>-</span> <a href="http://localhost/dotclear/index.php?post/field-formats"
  title="Field files" class="next">Field files &#187;</a>
-->
  </p>
  
  <div id="p34" class="post">
    <b1 class="post-title">NDfield format</b1>
    <!--
    <p class="post-info">By thierry sousbie    on Wednesday, January  2 2430, 06:56        - <a href="http://localhost/dotclear/index.php?category/Field-I-O">Field data</a>
        - <a href="http://localhost/dotclear/index.php?post/NDfield-format">Permalink</a>
    </p>
    -->
    
    
        
    <div class="post-content"><p>This is the native binary format of DisPerSE. Functions for reading and writing <em>NDfield</em> format  in <em>C</em> can be found within the file <code>${DISPERSE_SRC}/src/C/NDfield.c</code> (see functions <em>Load_NDfield</em> and <em>Save_NDfield</em>).
<br />
<br />
When using the C functions from Disperse, data is loaded into the following <em>C</em> structure which is close to the actual structure of the file (see file <code>${DISPERSE_SRC}/src/C/NDfield.h</code>):</p>


<pre>#define ND_CHAR   (1&lt;&lt;0)
#define ND_UCHAR  (1&lt;&lt;1)
#define ND_SHORT  (1&lt;&lt;2)
#define ND_USHORT (1&lt;&lt;3)
#define ND_INT    (1&lt;&lt;4)
#define ND_UINT   (1&lt;&lt;5)
#define ND_LONG   (1&lt;&lt;6)
#define ND_ULONG  (1&lt;&lt;7)
#define ND_FLOAT  (1&lt;&lt;8)
#define ND_DOUBLE (1&lt;&lt;9)</pre>


<pre>typedef struct NDfield_str
{
 char comment[80];  // a comment on the data
 int dims[NDFIELD_MAX_DIMS];  // dimensions of the grid, must be [ndims,nparticles] when data represents sample particles coordinates (i.e. when fdims_index!=0)
 int ndims;  // number of dimensions of the space
 int n_dims;  // number of meaningfull values in dims array
 int fdims_index; // if 0, the field is a regular grid of dimensions dims, else the file contains the dims[0] coordinates of dims[1] particles.
 int datatype;  // type of the data (one of the ND_... defined above)
 double x0[NDFIELD_MAX_DIMS];  // origin of the bounding box
 double delta[NDFIELD_MAX_DIMS];  // extent of the bounding box
 char dummy[160];  // dummy data, for future extensions or for storing anything you want.

 void *val;  // pointer to data

 long nval;  // total number of particles (fdims_index==1) or pixels (fdims_index==0)
 int datasize;  // size in bytes of datatype type.
} NDfield;</pre>


<p><br />
<br />
The <em>NDfield</em> binary format is organized as follows (blocks are delimited by <em>dummy</em> variables indicating the size of the blocks for FORTRAN compatibility, but they are ignored in C):
<br />
<br /></p>
<table style="margin: 1em auto 1em auto"><caption>NDnet binary format</caption><tr ><td width="10%" >field</td><td width="10%" >type</td><td width="10%">size</td><td width="65%" >comment</td></tr>
<tr  valign="top"><td style="background:grey">dummy</td><td style="background:grey">int(4B) </td><td style="background:grey">1</td><td style="background:grey"> for FORTRAN compatibility</td></tr>
<tr  valign="top"><td>tag</td><td>char(1B)</td><td>16</td><td>identifies the file type. Value : "NDFIELD"</td></tr>
<tr  valign="top"><td style="background:grey">dummy</td><td style="background:grey">int(4B) </td><td style="background:grey">1</td><td style="background:grey"></td></tr>
<tr  valign="top"><td style="background:grey">dummy</td><td style="background:grey">int(4B) </td><td style="background:grey">1</td><td style="background:grey"></td></tr>
<tr  valign="top"><td>ndims</td><td>int(4B)</td><td>1</td><td>number of dimensions of the embedding space</td></tr>
<tr  valign="top"><td>dims</td><td>int(4B)</td><td>20</td><td>size of the grid in pixels along each dimension, or [ndims,nparticles] if data represents particle coordinates (i.e. fdims_index=1)</td></tr>
<tr  valign="top"><td>fdims_index</td><td>int(4B)</td><td>1</td><td> 0 if data represents a regular grid, 1 if it represents coordinates of tracer particles</td></tr>
<tr  valign="top"><td>datatype</td><td>int(4B)</td><td>1</td><td>type of data stored (see below)</td></tr>
<tr  valign="top"><td>x0</td><td>double(8B)</td><td>20</td><td>origin of bounding box (first ndims val. are meaningfull)</td></tr>
<tr  valign="top"><td>delta</td><td>double(8B)</td><td>20</td><td>size of bounding box (first ndims val. are meaningfull)</td></tr>
<tr  valign="top"><td>dummy_ext</td><td>char(1B)</td><td>160</td><td>dummy data reserved for future extensions</td></tr>
<tr  valign="top"><td style="background:grey">dummy</td><td style="background:grey">int(4B) </td><td style="background:grey">1</td><td style="background:grey"></td></tr>
<tr  valign="top"><td style="background:grey">dummy</td><td style="background:grey">int(4B) </td><td style="background:grey">1</td><td style="background:grey"></td></tr>
<tr  valign="top"><td>data</td><td>size of datatype</td><td>N</td><td>data itself (N may be the number of pixels or ndism times the number of particles)</td></tr>
<tr  valign="top"><td style="background:grey">dummy</td><td style="background:grey">int(4B) </td><td style="background:grey">1</td><td style="background:grey"></td></tr>
</table>

<p><br />
<br /></p>
<table border="1"><caption> Possible data types</caption><tr align="center"><td width="20%" style="background:grey">name</td><td width="20%" style="background:grey">size (Bytes)</td><td width="20%" style="background:grey">type</td><td width="20%" style="background:grey">value</td></tr>
<tr align="center"><td style="background:grey"> ND_CHAR </td><td> 1 </td><td> integer </td><td>  1 (=1<<0)</td></tr>
<tr  align="center"><td style="background:grey"> ND_UCHAR </td><td> 1 </td><td> integer </td><td>  2 (=1<<1)</td></tr>
<tr align="center"><td style="background:grey"> ND_SHORT </td><td> 2 </td><td> integer </td><td>  4 (=1<<2)</td></tr>
<tr  align="center"><td style="background:grey"> ND_USHORT </td><td> 2 </td><td> integer </td><td>  8 (=1<<3)</td></tr>
<tr  align="center"><td style="background:grey"> ND_INT </td><td> 4 </td><td> integer </td><td>  16 (=1<<4)</td></tr>
<tr  align="center"><td style="background:grey"> ND_UINT  </td><td> 4 </td><td> integer </td><td>  32 (=1<<5)</td></tr>
<tr  align="center"><td style="background:grey"> ND_LONG </td><td> 8 </td><td> integer </td><td>  64 (=1<<6)</td></tr>
<tr  align="center"><td style="background:grey"> ND_ULONG </td><td> 8 </td><td> integer </td><td>  128 (=1<<7)</td></tr>
<tr  align="center"><td style="background:grey"> ND_FLOAT </td><td> 4 </td><td> float </td><td>  256 (=1<<8)</td></tr>
<tr  align="center"><td style="background:grey"> ND_DOUBLE </td><td> 8 </td><td> float </td><td>  512 (=1<<9)</td></tr>
</table></div>

      </div>

  

    
  
    
    
    </div>
</div> <!-- End #main -->

<div id="sidebar">
  <div id="blognav">
    <div class="categories"><ul><li><a href="index1694.html?category/Download">Download</a></li><li><a href="indexba87.html?category/Install">Install</a></li><li><a href="index3c4a.html?category/Overview">Overview</a></li><li><a href="index4559.html?category/Terminology">Terminology</a></li><li><a href="index4f3e.html?category/Manual">Manual</a></li><li><a href="index55a0.html?category/Quick-start">Tutorial</a></li><li><a href="index3333.html?category/Skeleton-I-O">Skeleton data</a></li><li><a href="indexe2a5.html?category/Network-I-O">Network data</a></li><li class="category-current"><a href="indexc777.html?category/Field-I-O">Field data</a></li><li><a href="indexdc31.html?category/References">Contact &amp; References</a></li></ul></div>  </div> <!-- End #blognav -->
   ____________________
  <div id="blogextra">
        <a href="indexc777.html?category/Field-I-O">&#94; Field data</a></br>
    <a href="indexa0c1.html?post/field-formats">&#171; Field files</a></br>
    <a href="indexd473.html?post/NDfield_ascii-format">&#187; NDfield_ascii format</a></br>
  </div> <!-- End #blogextra -->
</div>

</div> <!-- End #wrapper -->

<div id="footer">
  <p>Powered by <a href="http://www.dotclear.net/">DotClear</a> - Contact: sousbie<em>(AT)</em>iap<em>.</em>fr . </p>
</div>
</div> <!-- End #page -->
</body>

<!-- Mirrored from localhost/dotclear/index.php?post/NDfield-format by HTTrack Website Copier/3.x [XR&CO'2010], Sun, 27 Jan 2013 10:35:21 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8"><!-- /Added by HTTrack -->
</html>
